<view class="page">
  <view class="status-spacer"></view>

  <view class="nav-bar">
    <text class="nav-title">个人中心</text>
  </view>

  <view class="profile-card" bindtap="onLoginTap">
    <view class="profile-left">
      <text class="profile-greeting">
        {{hasLogin ? 'Hi, ' + userInfo.nickName : 'Hi, 微信用户'}}
      </text>
      <text class="profile-sub">
        {{hasLogin ? '欢迎回来' : '点击登录，完善资料'}}
      </text>
    </view>
    <view class="profile-avatar">
      <image
        wx:if="{{hasLogin && userInfo.avatarUrl}}"
        class="profile-avatar-image"
        src="{{userInfo.avatarUrl}}"
        mode="aspectFill"
      />
      <t-icon wx:else name="user-1" size="48rpx" />
    </view>
  </view>

  <view class="menu-section">
    <view class="menu-card">
      <block wx:for="{{menuPrimary}}" wx:for-item="item" wx:key="key">
        <view class="menu-item" data-key="{{item.key}}" bindtap="onMenuTap">
          <view class="menu-icon">
            <t-icon name="{{item.icon}}" size="28rpx" />
          </view>
          <text class="menu-text">{{item.label}}</text>
        </view>
      </block>
    </view>

    <view class="menu-card">
      <block wx:for="{{menuSecondary}}" wx:for-item="item" wx:key="key">
        <view class="menu-item" data-key="{{item.key}}" bindtap="onMenuTap">
          <view class="menu-icon">
            <t-icon name="{{item.icon}}" size="28rpx" />
          </view>
          <text class="menu-text">{{item.label}}</text>
        </view>
      </block>
    </view>

    <view class="menu-card">
      <view
        class="menu-item menu-item--center"
        data-key="{{hasLogin ? 'logout' : 'login'}}"
        bindtap="onMenuTap"
      >
        <view class="menu-icon menu-icon--plain">
          <t-icon name="{{hasLogin ? 'logout' : 'login'}}" size="26rpx" />
        </view>
        <text class="menu-text">{{hasLogin ? '退出登录' : '登录 / 注册'}}</text>
      </view>
    </view>
  </view>

  <t-tab-bar
    class="bottom-bar"
    value="{{tabValue}}"
    fixed="{{true}}"
    bordered="{{true}}"
    safe-area-inset-bottom="{{true}}"
    bindchange="onTabChange"
  >
    <t-tab-bar-item value="activity">
      <view slot="icon" class="tab-icon">
        <t-icon name="home" size="40rpx" />
      </view>
      活动
    </t-tab-bar-item>
    <t-tab-bar-item value="mine">
      <view slot="icon" class="tab-icon">
        <t-icon name="user-1" size="40rpx" />
      </view>
      我的
    </t-tab-bar-item>
  </t-tab-bar>

  <view class="home-indicator"></view>
</view>
