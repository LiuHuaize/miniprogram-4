<view class="page">
  <view class="status-spacer"></view>

  <view class="nav-bar">
    <view class="nav-left" bindtap="onBack">
      <view class="nav-icon-wrap">
        <t-icon name="chevron-left" size="32rpx" />
      </view>
      <text class="nav-text">返回</text>
    </view>
    <text class="nav-title">我的信息填报</text>
    <view class="nav-right"></view>
  </view>

  <scroll-view class="scroll-area" scroll-y show-scrollbar="{{false}}">
    <view
      class="card submission-card"
      wx:for="{{list}}"
      wx:key="id"
      data-activity-id="{{item.activityId}}"
      bindtap="onOpen"
    >
      <view class="card-header">
        <view class="card-title-group">
          <text class="card-title">{{item.summary.title}}</text>
          <text class="card-sub">{{item.summary.sub}}</text>
        </view>
        <view class="status-tag {{item.status === 'submitted' ? 'status-tag--active' : 'status-tag--muted'}}">
          {{item.statusText}}
        </view>
      </view>
      <view class="card-meta">
        <text>营员数量：{{item.childrenCount}}</text>
        <text>更新时间：{{item.updatedLabel || '--'}}</text>
      </view>
      <view class="card-actions" catchtap>
        <t-button
          class="action-btn"
          theme="primary"
          shape="round"
          size="small"
          data-activity-id="{{item.activityId}}"
          bindtap="onOpen"
        >
          查看/修改
        </t-button>
        <t-button
          class="action-btn"
          theme="default"
          shape="round"
          size="small"
          disabled="{{item.status !== 'submitted'}}"
          data-activity-id="{{item.activityId}}"
          bindtap="onCancel"
        >
          撤销
        </t-button>
      </view>
    </view>

    <view class="empty" wx:if="{{!list.length && !loading}}">
      <text>暂无填写记录</text>
    </view>
  </scroll-view>

  <view class="home-indicator"></view>
</view>
